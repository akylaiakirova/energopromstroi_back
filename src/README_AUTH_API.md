# REST API (JWT) ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ù–∏–∂–µ –æ–ø–∏—Å–∞–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –í—Å–µ –æ—Ç–≤–µ—Ç—ã ‚Äî JSON. –î–ª—è –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer <token>`.

## –ë–∞–∑–æ–≤—ã–π URL
- –õ–æ–∫–∞–ª—å–Ω–æ: `http://localhost:8080/api`

## –õ–æ–≥–∏–Ω
- –ú–µ—Ç–æ–¥: `POST /auth/login`
- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):
  - `email` (string, required)
  - `password` (string, required)
- –û—Ç–≤–µ—Ç `200`:
```json
{
  "access_token": "<JWT>",
  "token_type": "bearer",
  "expires_in": 3600
}
```

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.

## –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è (–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –Ω–∞ email)
- –ú–µ—Ç–æ–¥: `POST /auth/forgot-password`
- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):
  - `email` (string, required) ‚Äî email —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –õ–æ–≥–∏–∫–∞: –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–∏—Å—å–º–æ–º –Ω–∞ `email`.
- –û—Ç–≤–µ—Ç `200`:
```json
{ "message": "–í—Ä–µ–º–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ email" }
```

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ –≤ `.env` (MAIL_*) –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å SMTP.

## –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è (–ø–æ JWT)
- –ú–µ—Ç–æ–¥: `POST /auth/change-password`
- –¢—Ä–µ–±—É–µ—Ç—Å—è: `Authorization: Bearer <token>`
- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):
  - `current_password` (string, required)
  - `new_password` (string, required, min 8)
- –û—Ç–≤–µ—Ç `200`:
```json
{ "message": "–ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω—ë–Ω" }
```

## –ü—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ú–µ—Ç–æ–¥: `GET /auth/me`
- –¢—Ä–µ–±—É–µ—Ç—Å—è: `Authorization` –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å JWT
- –û—Ç–≤–µ—Ç `200`: –æ–±—ä–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- –ú–µ—Ç–æ–¥: `POST /auth/refresh`
- –¢—Ä–µ–±—É–µ—Ç—Å—è: JWT
- –û—Ç–≤–µ—Ç `200`:
```json
{
  "access_token": "<JWT>",
  "token_type": "bearer",
  "expires_in": 3600
}
```

## –í—ã—Ö–æ–¥
- –ú–µ—Ç–æ–¥: `POST /auth/logout`
- –¢—Ä–µ–±—É–µ—Ç—Å—è: JWT
- –û—Ç–≤–µ—Ç `200`:
```json
{ "message": "–í—ã –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã" }
```

–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é guard `api` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JWT. –†–æ—Ç–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ ‚Äî —á–µ—Ä–µ–∑ `/auth/refresh`.
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

---------------------------------------------------------------------------

# üëâ REST API ‚Äî –ú–æ—â–Ω–æ—Å—Ç–∏ –∫–æ—Ç–ª–æ–≤ (boilers_capacity)
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer <token>`.

## –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –º–æ—â–Ω–æ—Å—Ç–µ–π
- –ú–µ—Ç–æ–¥: `GET /boilers-capacity`
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ø–æ –ø–æ–ª—é `name` –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é
- –û—Ç–≤–µ—Ç `200`: –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤
```json
[
  { "id": 1, "name": "10 –∫–í—Ç", "createAt": "2025-09-14T10:00:00Z", "updatedAt": null },
  { "id": 2, "name": "20 –∫–í—Ç", "createAt": "2025-09-14T10:05:00Z", "updatedAt": null }
]
```

## –°–æ–∑–¥–∞—Ç—å –º–æ—â–Ω–æ—Å—Ç—å –∫–æ—Ç–ª–∞
- –ú–µ—Ç–æ–¥: `POST /boilers-capacity`
- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):
  - `name` (string, required)
- –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç `201`: —Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
```json
{ "id": 3, "name": "30 –∫–í—Ç", "createAt": "2025-09-14T10:10:00Z", "updatedAt": null }
```

## –û–±–Ω–æ–≤–∏—Ç—å –º–æ—â–Ω–æ—Å—Ç—å –∫–æ—Ç–ª–∞
- –ú–µ—Ç–æ–¥: `PUT /boilers-capacity/{id}`
- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):
  - `name` (string, required)
- –û—Ç–≤–µ—Ç `200`: –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
```json
{ "id": 3, "name": "35 –∫–í—Ç", "createAt": "2025-09-14T10:10:00Z", "updatedAt": "2025-09-14T10:20:00Z" }
```

## –£–¥–∞–ª–∏—Ç—å –º–æ—â–Ω–æ—Å—Ç—å –∫–æ—Ç–ª–∞
- –ú–µ—Ç–æ–¥: `DELETE /boilers-capacity/{id}`
- –û—Ç–≤–µ—Ç `200`:
```json
{ "message": "–£–¥–∞–ª–µ–Ω–æ" }
```

---------------------------------------------------------------------------

# üëâ REST API ‚Äî –®–∞–±–ª–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (templates_document)
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer <token>`.

–ü–æ–ª–µ `files` ‚Äî –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ —Å –∏–º–µ–Ω–∞–º–∏ —Ñ–∞–π–ª–æ–≤. –ò–º–µ–Ω–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `td_YYYYmmdd_HHMMSS_xxxxxx`.

## –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤
- –ú–µ—Ç–æ–¥: `GET /templates-document`
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ø–æ –ø–æ–ª—é `name` –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é
- –û—Ç–≤–µ—Ç `200`: –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤
```json
[
  {
    "id": 1,
    "name": "–î–æ–≥–æ–≤–æ—Ä-–ø–æ–¥—Ä—è–¥",
    "files": ["td_20250914_101000_ab12cd", "td_20250914_101000_ef34gh"],
    "note": null,
    "createAt": "2025-09-14T10:10:00Z",
    "updatedAt": null
  }
]
```

## –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω
- –ú–µ—Ç–æ–¥: `POST /templates-document`
- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):
  - `name` (string, required)
  - `files` (array<string>, optional) ‚Äî —Å–ø–∏—Å–æ–∫ –∏—Å—Ö–æ–¥–Ω—ã—Ö –∏–º—ë–Ω; —Å–µ—Ä–≤–µ—Ä –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏—Ö –≤ `td_YYYYmmdd_HHMMSS_xxxxxx`
  - `note` (string, optional)
- –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç `201`: —Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
```json
{
  "id": 2,
  "name": "–ê–∫—Ç-–ø—Ä–∏–µ–º–∫–∏",
  "files": ["td_20250914_111500_k9LmNq"],
  "note": "–í–µ—Ä—Å–∏—è –¥–ª—è –ø–µ—á–∞—Ç–∏",
  "createAt": "2025-09-14T11:15:00Z",
  "updatedAt": null
}
```

## –û–±–Ω–æ–≤–∏—Ç—å —à–∞–±–ª–æ–Ω
- –ú–µ—Ç–æ–¥: `PUT /templates-document/{id}`
- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):
  - `name` (string, required)
  - `files` (array<string>, optional) ‚Äî –µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω–æ, –º–∞—Å—Å–∏–≤ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω
  - `note` (string, optional)
- –û—Ç–≤–µ—Ç `200`: –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
```json
{
  "id": 2,
  "name": "–ê–∫—Ç-–ø—Ä–∏–µ–º–∫–∏ (v2)",
  "files": ["td_20250914_121000_Zx12Yv", "td_20250914_121000_Pq34Rt"],
  "note": "–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–æ–ª—è",
  "createAt": "2025-09-14T11:15:00Z",
  "updatedAt": "2025-09-14T12:10:00Z"
}
```

## –£–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω
- –ú–µ—Ç–æ–¥: `DELETE /templates-document/{id}`
- –û—Ç–≤–µ—Ç `200`:
```json
{ "message": "–£–¥–∞–ª–µ–Ω–æ" }
```

---------------------------------------------------------------------------

# üëâ REST API ‚Äî –ú–∞—Ç–µ—Ä–∏–∞–ª—ã (materials)
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer <token>`.

## –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –ú–µ—Ç–æ–¥: `GET /materials`
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ø–æ –ø–æ–ª—é `name` –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é
- –û—Ç–≤–µ—Ç `200`: –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤
```json
[
  { "id": 1, "name": "–°—Ç–∞–ª—å A", "unit": "–∫–≥", "createAt": "2025-09-14T10:00:00Z", "updatedAt": null },
  { "id": 2, "name": "–°—Ç–∞–ª—å B", "unit": "–∫–≥", "createAt": "2025-09-14T10:05:00Z", "updatedAt": null }
]
```

## –°–æ–∑–¥–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª
- –ú–µ—Ç–æ–¥: `POST /materials`
- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):
  - `name` (string, required)
  - `unit` (string, required)
- –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç `201`: —Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
```json
{ "id": 3, "name": "–°—Ç–∞–ª—å C", "unit": "–∫–≥", "createAt": "2025-09-14T10:10:00Z", "updatedAt": null }
```

## –û–±–Ω–æ–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª
- –ú–µ—Ç–æ–¥: `PUT /materials/{id}`
- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):
  - `name` (string, required)
  - `unit` (string, required)
- –û—Ç–≤–µ—Ç `200`: –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
```json
{ "id": 3, "name": "–°—Ç–∞–ª—å C-1", "unit": "–∫–≥", "createAt": "2025-09-14T10:10:00Z", "updatedAt": "2025-09-14T10:20:00Z" }
```

## –£–¥–∞–ª–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª
- –ú–µ—Ç–æ–¥: `DELETE /materials/{id}`
- –û—Ç–≤–µ—Ç `200`:
```json
{ "message": "–£–¥–∞–ª–µ–Ω–æ" }
```

–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:
- `materials_arrival`, `stocks_balance`, `write_off` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `material_id`.
- –î–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏ –≤ —Ä–∞–º–∫–∞—Ö –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `conversion_materials`.

---------------------------------------------------------------------------

# üëâ REST API ‚Äî –ö–ª–∏–µ–Ω—Ç—ã (clients)
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer <token>`.

## –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ú–µ—Ç–æ–¥: `GET /clients`
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ø–æ –ø–æ–ª—é `name` –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é
- –û—Ç–≤–µ—Ç `200`: –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤
```json
[
  { "id": 1, "name": "–û–û–û –†–æ–º–∞—à–∫–∞", "email": "info@romashka.kz", "phone": "77001234567", "whatsapp": null, "telegram": null, "note": null, "createAt": "2025-09-14T10:00:00Z", "updatedAt": null }
]
```

## –°–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
- –ú–µ—Ç–æ–¥: `POST /clients`
- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):
  - `name` (string, required)
  - `email` (string, optional, email)
  - `phone` (string, required, —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã)
  - `whatsapp` (string, optional)
  - `telegram` (string, optional)
  - `note` (string, optional)
- –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç `201`: —Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
```json
{ "id": 2, "name": "–¢–û–û –í–∞—Å–∏–ª—ë–∫", "email": "contact@vasilek.kz", "phone": "77007654321", "whatsapp": "77007654321", "telegram": "@vasilek", "note": "VIP", "createAt": "2025-09-14T10:10:00Z", "updatedAt": null }
```

## –û–±–Ω–æ–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
- –ú–µ—Ç–æ–¥: `PUT /clients/{id}`
- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):
  - `name` (string, required)
  - `email` (string, optional, email)
  - `phone` (string, required, —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã)
  - `whatsapp` (string, optional)
  - `telegram` (string, optional)
  - `note` (string, optional)
- –û—Ç–≤–µ—Ç `200`: –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
```json
{ "id": 2, "name": "–¢–û–û –í–∞—Å–∏–ª—ë–∫+", "email": "office@vasilek.kz", "phone": "77007654321", "whatsapp": "77007654321", "telegram": "@vasilek", "note": "–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π –∫–ª–∏–µ–Ω—Ç", "createAt": "2025-09-14T10:10:00Z", "updatedAt": "2025-09-14T10:20:00Z" }
```

## –£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
- –ú–µ—Ç–æ–¥: `DELETE /clients/{id}`
- –û—Ç–≤–µ—Ç `200`:
```json
{ "message": "–£–¥–∞–ª–µ–Ω–æ" }
```

---------------------------------------------------------------------------

# üëâ REST API ‚Äî –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (users)
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer <token>`.

–í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
- –ü–æ–ª–µ `has_access` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∞–≤–æ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É.
- –ü–∞—Ä–æ–ª—å (`password`) –ù–ï –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, –µ—Å–ª–∏ `has_access` –ø—É—Å—Ç–æ/false.
- –ï—Å–ª–∏ `has_access=true`, –ø–∞—Ä–æ–ª—å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏. –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏: –µ—Å–ª–∏ –≤–∫–ª—é—á–∞–µ—Ç–µ –¥–æ—Å—Ç—É–ø –∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—â—ë –Ω–µ—Ç –ø–∞—Ä–æ–ª—è ‚Äî –ø–µ—Ä–µ–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å.
- –¢–µ–ª–µ—Ñ–æ–Ω `phone` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã. Email –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ email –∏ —É–Ω–∏–∫–∞–ª–µ–Ω.

## –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- –ú–µ—Ç–æ–¥: `GET /users`
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ø–æ –ø–æ–ª—é `name` –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é
- –û—Ç–≤–µ—Ç `200`: –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤
```json
[
  {
    "id": 1,
    "role_id": 1,
    "position": "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",
    "name": "–ê–∫—ã–ª–∞–π",
    "surname": "–ê–∫–∏—Ä–æ–≤–∞",
    "email": "akylaiakirova@gmail.com",
    "phone": "77000000000",
    "has_access": true,
    "createAt": "2025-09-14T10:00:00Z",
    "updatedAt": "2025-09-14T10:05:00Z"
  }
]
```

## –°–æ–∑–¥–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- –ú–µ—Ç–æ–¥: `POST /users`
- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):
  - `role_id` (int, required, exists: roles.id)
  - `position` (string, required)
  - `name` (string, required)
  - `surname` (string, optional)
  - `email` (string, required, email, unique)
  - `phone` (string, required, —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã)
  - `whatsapp` (string, optional)
  - `telegram` (string, optional)
  - `passport_number` (string, optional)
  - `passport_pin` (string, optional)
  - `salary` (number, optional)
  - `comment` (string, optional)
  - `date_start` (date, optional)
  - `date_end` (date, optional)
  - `has_access` (boolean, optional; –µ—Å–ª–∏ true ‚Äî –ø–∞—Ä–æ–ª—å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)
  - `password` (string, min 8; –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, –µ—Å–ª–∏ `has_access=true`)
- –ü—Ä–∏–º–µ—Ä `has_access=true`:
```json
{
  "role_id": 2,
  "position": "–ë—É—Ö–≥–∞–ª—Ç–µ—Ä",
  "name": "–ê–Ω–Ω–∞",
  "surname": "–ò–≤–∞–Ω–æ–≤–∞",
  "email": "anna@example.com",
  "phone": "77001234567",
  "has_access": true,
  "password": "secretPa55"
}
```
- –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç `201`: —Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç (–±–µ–∑ –ø–∞—Ä–æ–ª—è)

## –û–±–Ω–æ–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- –ú–µ—Ç–æ–¥: `PUT /users/{id}`
- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON) ‚Äî —Ç–µ –∂–µ –ø–æ–ª—è, —á—Ç–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏; `email` ‚Äî —É–Ω–∏–∫–∞–ª–µ–Ω —Å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- –ü—Ä–∞–≤–∏–ª–æ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞: –µ—Å–ª–∏ –≤–∫–ª—é—á–∞–µ—Ç–µ `has_access=true` –∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—â—ë –Ω–µ—Ç –ø–∞—Ä–æ–ª—è ‚Äî –ø–µ—Ä–µ–¥–∞–π—Ç–µ –ø–æ–ª–µ `password`.
- –û—Ç–≤–µ—Ç `200`: –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
```json
{
  "id": 5,
  "role_id": 2,
  "position": "–ë—É—Ö–≥–∞–ª—Ç–µ—Ä",
  "name": "–ê–Ω–Ω–∞",
  "surname": "–ò–≤–∞–Ω–æ–≤–∞",
  "email": "anna.office@example.com",
  "phone": "77001234567",
  "has_access": true,
  "createAt": "2025-09-14T10:10:00Z",
  "updatedAt": "2025-09-14T12:20:00Z"
}
```

## –£–¥–∞–ª–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- –ú–µ—Ç–æ–¥: `DELETE /users/{id}`
- –û—Ç–≤–µ—Ç `200`:
```json
{ "message": "–£–¥–∞–ª–µ–Ω–æ" }
```

–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å `has_access=false/null` –Ω–µ —Å–º–æ–∂–µ—Ç –≤–æ–π—Ç–∏: `POST /auth/login` –≤–µ—Ä–Ω—ë—Ç `403`.
- –°–µ—Å—Å–∏–∏ –ø–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `devices` (—Ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ refresh‚Äë—Ç–æ–∫–µ–Ω—ã, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ `last_ip`, `user_agent`).

---------------------------------------------------------------------------

# üëâ REST API ‚Äî –†–µ–∫–≤–∏–∑–∏—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (user_banks)
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer <token>`.

## –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤
- –ú–µ—Ç–æ–¥: `GET /user-banks`
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ (query):
  - `user_id` (int, optional) ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É
- –û—Ç–≤–µ—Ç `200`: –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤
```json
[
  {
    "id": 1,
    "user_id": 5,
    "bank_name": "–ö–∞—Å–ø–∏ –ë–∞–Ω–∫",
    "bank_account_number": "KZ1234567890",
    "bank_bik": "CASPKZKA",
    "address_registered": "–ê–ª–º–∞—Ç—ã, —É–ª. –ê–±–∞—è 1",
    "address_actual": "–ê–ª–º–∞—Ç—ã, —É–ª. –°–∞—Ç–ø–∞–µ–≤–∞ 2",
    "createAt": "2025-09-14T10:00:00Z",
    "updatedAt": null
  }
]
```

## –°–æ–∑–¥–∞—Ç—å —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
- –ú–µ—Ç–æ–¥: `POST /user-banks`
- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):
  - `user_id` (int, required, exists: users.id)
  - `bank_name` (string, required)
  - `bank_account_number` (string, required)
  - `bank_bik` (string, optional)
  - `address_registered` (string, optional)
  - `address_actual` (string, optional)
- –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç `201`: —Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
```json
{
  "id": 2,
  "user_id": 5,
  "bank_name": "Halyk Bank",
  "bank_account_number": "KZ0987654321",
  "bank_bik": null,
  "address_registered": null,
  "address_actual": null,
  "createAt": "2025-09-14T10:10:00Z",
  "updatedAt": null
}
```

## –û–±–Ω–æ–≤–∏—Ç—å —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
- –ú–µ—Ç–æ–¥: `PUT /user-banks/{id}`
- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):
  - `user_id` (int, required, exists: users.id)
  - `bank_name` (string, required)
  - `bank_account_number` (string, required)
  - `bank_bik` (string, optional)
  - `address_registered` (string, optional)
  - `address_actual` (string, optional)
- –û—Ç–≤–µ—Ç `200`: –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
```json
{
  "id": 2,
  "user_id": 5,
  "bank_name": "Halyk Bank (–æ–±–Ω–æ–≤–ª.)",
  "bank_account_number": "KZ0987654321",
  "bank_bik": "HalykKZKX",
  "address_registered": "–ê—Å—Ç–∞–Ω–∞, –ø—Ä. –ê–±—ã–ª–∞–π —Ö–∞–Ω–∞ 10",
  "address_actual": "–ê—Å—Ç–∞–Ω–∞, –ø—Ä. –ê–±—ã–ª–∞–π —Ö–∞–Ω–∞ 10",
  "createAt": "2025-09-14T10:10:00Z",
  "updatedAt": "2025-09-14T12:20:00Z"
}
```

## –£–¥–∞–ª–∏—Ç—å —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
- –ú–µ—Ç–æ–¥: `DELETE /user-banks/{id}`
- –û—Ç–≤–µ—Ç `200`:
```json
{ "message": "–£–¥–∞–ª–µ–Ω–æ" }
```